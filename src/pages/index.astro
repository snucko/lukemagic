import { getCollection } from 'astro:content';
import Base from "../layouts/Base.astro";

async function getRandomIdeas() {
  const ideas = await getCollection('idea');
  return ideas.sort(() => 0.5 - Math.random()).slice(0, 3);
}

const randomIdeas = await getRandomIdeas();
---
<Base title="Luke â€” Magic" description="Street magic, close-up, and stage by Luke.">
  <section class="max-w-6xl mx-auto px-6 py-16">
    <div class="grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-4xl md:text-6xl font-serif font-bold leading-tight">Luke</h1>
        <p class="mt-4 text-lg opacity-90">Card and coin magic with impossible moments and clean endings.</p>
        <div class="mt-6 flex gap-3">
          <a class="btn-primary" href="/tricks/">See Tricks</a>
          <a class="btn-ghost" href="/shows/">Upcoming Shows</a>
        </div>
      </div>
      <img src="/media/hero.jpg" alt="Luke performing" class="rounded-2xl transition-transform duration-300 hover:scale-105" loading="lazy" />
    </div>
  </section>
  <section class="max-w-6xl mx-auto px-6 py-16">
    <h2 class="text-3xl md:text-4xl font-serif font-bold leading-tight text-center">Inspirations</h2>
    <p class="mt-4 text-lg opacity-90 text-center">A glimpse into the world of magic.</p>
    <div class="grid md:grid-cols-3 gap-8 mt-10">
      {randomIdeas.map(idea => (
        <div class="card p-6">
          <h3 class="text-xl font-bold font-serif">{idea.data.title}</h3>
          <p class="mt-2 opacity-80">{idea.data.description}</p>
          <p class="mt-4 text-sm font-bold text-magic-purple">{idea.data.category}</p>
        </div>
      ))}
    </div>
  </section>
</Base>